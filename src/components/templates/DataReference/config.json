{
  "name": "DataReference",
  "description": "Data Reference Template",
  "type": "Template",
  "icon": "DataReference.svg",
  "subtype": "DATAVIEW",
  "hideTemplatePicker": true,
  "hideFromTemplatePicker": true,
  "viewHeadingLabel": "Field label",
  "properties": [
    {
      "label": "Input settings",
      "format": "GROUP",
      "properties": [
        {
          "name": "referenceList",
          "label": "Data page",
          "format": "CONTENTPICKERSOURCE",
          "visibility": "$this.mode != 'readonly'"
        },
        {
          "name": "parameters",
          "label": "Parameters",
          "format": "PARAMETERS",
          "visibility": "$this.mode != 'readonly'",
          "showOverride": false
        },
        {
          "name": "mode",
          "format": "DISPLAYMODE",
          "label": "Mode"
        },
        {
          "format": "AUTOGENERATED",
          "label": "Table columns",
          "visibility": "$this.displayAs == 'table' || $this.displayAs == 'simpleTable'"
        },
        {
          "name": "displayfield",
          "format": "DISPLAYFIELD",
          "label": "Display field"
        },
        {
          "name": "allowAndPersistChangesInReviewMode",
          "label": "Show as picker and persist changes in review mode",
          "format": "BOOLEAN",
          "visibility": "$this.displayAs != 'table' && $this.displayAs != 'simpleTable' && $this.mode != 'readonly' && $this.displayAs != 'checkboxgroup'"
        }
      ]
    },
    {
      "name": "Views",
      "label": "Show details (optional)",
      "format": "CONTENTPICKER",
      "addTypeList": ["Views"],
      "showCreateNewOption": true,
      "visibility": "($this.displayAs != 'table' && $this.displayAs != 'simpleTable' && $this.displayAs != 'combobox' && $this.displayAs != 'checkboxgroup') && $this.mode != 'readonly'"
    },
    {
      "name": "Columns",
      "label": "Columns",
      "format": "CONTENTPICKER",
      "addTypeList": ["Fields", "Associations"],
      "hideModifyIcons": false,
      "modifyPanelOverride": "ListField",
      "visibility": "(@AUTOGENERATED != true || @AUTOGENERATED IS_NULL) && ($this.displayAs == 'table' || $this.displayAs == 'simpleTable' || $this.displayAs == 'readonlyMulti')",
      "lookupPathOverride": "children[0].config.presets[0]"
    },
    {
      "name": "showPromotedFilters",
      "label": "Enable search",
      "visibility": "$this.displayAs == 'table' && ($this.isSearchable IS_NOT_NULL || @QUERYABLEDATASOURCE == true)",
      "format": "BOOLEAN"
    },
    {
      "name": "inline",
      "label": "Horizontal display",
      "visibility": "$this.displayAs == 'checkboxgroup'",
      "format": "BOOLEAN"
    },
    {
      "name": "promotedFilters",
      "label": "Search fields",
      "format": "CONTENTPICKER",
      "addTypeList": ["Fields"],
      "visibility": "$this.displayAs == 'table' && $this.showPromotedFilters = true",
      "saveToConfig": true,
      "conditionsContext": "contextClass",
      "lookupPathOverride": "children[0]"
    },
    {
      "name": "fillAvailableSpace",
      "label": "Column to take up remaining width",
      "format": "FILLCOLUMNWIDTH",
      "visibility": "$this.displayAs == 'table' || $this.displayAs == 'simpleTable'",
      "lookupPathOverride": "children[0].config.presets[0]"
    },
    {
      "name": "columnFilter",
      "label": "Column filter",
      "format": "COLUMNFILTER",
      "visibility": "$this.displayAs == 'table'",
      "lookupPathOverride": "children[0].config.presets[0]"
    },
    {
      "name": "columnSort",
      "label": "Column sort",
      "format": "COLUMNSORT",
      "visibility": "$this.displayAs == 'table'",
      "lookupPathOverride": "children[0].config.presets[0]"
    },
    {
      "name": "defaultRowHeight",
      "label": "Row density",
      "format": "SELECT",
      "visibility": "$this.displayAs == 'table' || $this.displayAs == 'simpleTable' || $this.displayAs == 'readonlyMulti'",
      "lookupPathOverride": "viewMetadata.children[0].config",
      "source": [
        {
          "key": "",
          "value": "Default"
        },
        {
          "key": "1",
          "value": "Short"
        },
        {
          "key": "2",
          "value": "Medium"
        },
        {
          "key": "3",
          "value": "Tall"
        },
        {
          "key": "4",
          "value": "Full content"
        }
      ]
    }
  ]
}
