{
    "name": "SimpleTable",
    "description": "Datatype List Template",
    "type": "Template",
    "subtype": "DATAVIEW",
    "icon": "EditableTable.svg",
    "hideTemplatePicker": true,
    "hideFromTemplatePicker": true,
    "editing": true,
    "properties": [
      {
        "name": "parameters",
        "label": "",
        "format": "PARAMETERS"
      },
      {
        "name": "renderMode",
        "label": "Mode",
        "format": "RENDERMODE"
      },
      {
        "name": "multiRecordDisplayAs",
        "label": "Display as",
        "format": "MULTIRECORDDISPLAYAS"
      },
      {
        "format": "AUTOGENERATED",
        "label": "Table columns",
        "visibility": "$this.multiRecordDisplayAs == 'table' || $this.multiRecordDisplayAs == 'simpleTable'"
      },
      {
        "format": "VIEWPICKER",
        "name": "Views",
        "label": "Select View item",
        "ofContextClass": true,
        "visibility": "$this.multiRecordDisplayAs == 'fieldGroup'",
        "lookupPathOverride": "viewMetadata.children[0].children"
      },
      {
        "visibility": "$this.multiRecordDisplayAs == 'fieldGroup'",
        "lookupPathOverride": "viewMetadata.config",
        "format": "CASCADE",
        "source": {
          "format": "SELECT",
          "label": "Field header",
          "name": "fieldHeader",
          "defaultValue": "constant",
          "source": [
            {
              "key": "constant",
              "value": "Constant"
            },
            {
              "key": "propertyRef",
              "value": "Property Reference"
            }
          ]
        },
        "cascadeElements": [
          {
            "key": "heading",
            "format": "TEXT",
            "name": "heading",
            "label": "Item label",
            "match": "constant",
            "defaultValue": ""
          },
          {
            "key": "heading",
            "useAnnotation": false,
            "format": "PROPERTY",
            "name": "heading",
            "label": "Dynamic label",
            "match": "propertyRef"
          }
        ]
      },
      {
        "name": "editMode",
        "label": "Add and edit records within",
        "format": "EDITMODE",
        "visibility": "($this.multiRecordDisplayAs == 'table') && ($this.renderMode == 'editable')",
        "lookupPathOverride": "viewMetadata.config",
        "defaultValue": "tableRows",
        "source": [
          {
            "key": "modal",
            "value": "Modal"
          },
          {
            "key": "tableRows",
            "value": "Table rows"
          }
        ],
        "helperText": "Using a modal is recommended for complex records"
      },
      {
        "name": "defaultView",
        "label": "View for add and edit modal",
        "format": "VIEWPICKER",
        "ofContextClass": true,
        "noViewReference": true,
        "skipListViews": true,
        "required": true,
        "lookupPathOverride": "viewMetadata.config.editModeConfig",
        "visibility": "($this.renderMode == 'editable') && ($this.multiRecordDisplayAs == 'table') && ($this.editMode == 'modal')",
        "defaultValue": "Create"
      },
      {
        "name": "useSeparateViewForEdit",
        "label": "Use separate View for edit",
        "format": "BOOLEAN",
        "visibility": "($this.renderMode == 'editable') && ($this.multiRecordDisplayAs == 'table') && ($this.editMode == 'modal')",
        "lookupPathOverride": "viewMetadata.config.editModeConfig"
      },
      {
        "format": "VIEWPICKER",
        "name": "editView",
        "label": "View for edit modal",
        "ofContextClass": true,
        "noViewReference": true,
        "skipListViews": true,
        "required": true,
        "visibility": "($this.renderMode == 'editable') && ($this.multiRecordDisplayAs == 'table') && ($this.editMode == 'modal') && ($this.editModeConfig.useSeparateViewForEdit == true)",
        "lookupPathOverride": "viewMetadata.config.editModeConfig",
        "defaultValue": "pyEdit"
      },
      {
        "name": "tableFormat",
        "label": "Table format",
        "format": "SELECT",
        "visibility": "($this.multiRecordDisplayAs == 'table') && ($this.renderMode == 'editable') && ($this.editMode == 'modal')",
        "lookupPathOverride": "viewMetadata.config",
        "defaultValue": "standard",
        "source": [
          {
            "key": "standard",
            "value": "Standard"
          },
          {
            "key": "simple",
            "value": "Simple"
          }
        ]
      },
      {
        "format": "BOOLEAN",
        "name": "usePrefill",
        "label": "Use prefill",
        "lookupPathOverride": "viewMetadata.config",
        "visibility": "@PLATFORMNAME == 'launchpad' && $this.renderMode == 'editable' && $this.multiRecordDisplayAs == 'table' && $this.addAndEditRowsWithin == 'modal'"
      },
      {
        "format": "DATAPAGE",
        "name": "prefill",
        "label": "Prefill data page",
        "contextFilterProp": "contextClass",
        "lookupPathOverride": "viewMetadata.config",
        "visibility": "@PLATFORMNAME == 'launchpad' && $this.usePrefill == true && $this.renderMode == 'editable' && $this.multiRecordDisplayAs == 'table' && $this.addAndEditRowsWithin == 'modal'"
      },
      {
        "name": "Columns",
        "label": "Columns",
        "format": "CONTENTPICKER",
        "addTypeList": ["Fields", "Associations"],
        "hideModifyIcons": false,
        "modifyPanelOverrideProp": "renderMode",
        "modifyPanelOverride": {
          "ReadOnly": "ListField"
        },
        "conditionsContext": "contextClass",
        "visibility": "(@AUTOGENERATED != true || @AUTOGENERATED IS_NULL) && ($this.multiRecordDisplayAs == 'table' || $this.multiRecordDisplayAs == 'simpleTable')",
        "propToHideItem": "hide"
      },
      {
        "name": "fillAvailableSpace",
        "label": "Column to take up remaining width",
        "format": "FILLCOLUMNWIDTH",
        "visibility": "$this.multiRecordDisplayAs == 'table' || $this.multiRecordDisplayAs == 'simpleTable'"
      },
      {
        "name": "defaultRowHeight",
        "label": "Row density",
        "format": "SELECT",
        "visibility": "$this.multiRecordDisplayAs == 'table' || $this.multiRecordDisplayAs == 'simpleTable'",
        "lookupPathOverride": "viewMetadata.config",
        "source": [
          {
            "key": "",
            "value": "Default"
          },
          {
            "key": "1",
            "value": "Short"
          },
          {
            "key": "2",
            "value": "Medium"
          },
          {
            "key": "3",
            "value": "Tall"
          },
          {
            "key": "4",
            "value": "Full content"
          }
        ]
      },
      {
        "label": "Conditions",
        "format": "GROUP",
        "properties": [
          {
            "name": "allowAdd",
            "label": "Allow adding",
            "format": "EXPRESSION",
            "useParentContext": true,
            "lookupPathOverride": "viewMetadata.config.allowActions",
            "visibility": "($this.renderMode != 'readonly')"
          },
          {
            "name": "allowEdit",
            "label": "Allow editing",
            "format": "EXPRESSION",
            "useParentContext": true,
            "lookupPathOverride": "viewMetadata.config.allowActions",
            "visibility": "($this.renderMode != 'readonly')"
          },
          {
            "name": "allowDelete",
            "label": "Allow deleting",
            "format": "EXPRESSION",
            "useParentContext": true,
            "lookupPathOverride": "viewMetadata.config.allowActions",
            "visibility": "($this.renderMode != 'readonly')"
          },
          {
            "name": "allowDragDrop",
            "label": "Allow row re-ordering",
            "format": "EXPRESSION",
            "useParentContext": true,
            "lookupPathOverride": "viewMetadata.config.allowActions",
            "visibility": "($this.renderMode != 'readonly') && ($this.multiRecordDisplayAs != 'fieldGroup')"
          }
        ]
      },
      {
        "label": "Record-level conditions",
        "format": "GROUP",
        "additionalInfo": {
          "content": "Record-level conditions apply to individual records. When applicable they take affect only after the general conditions have been applied."
        },
        "properties": [
          {
            "name": "allowRowDelete",
            "label": "Allow deleting records",
            "format": "EXPRESSION",
            "lookupPathOverride": "viewMetadata.config",
            "visibility": "$this.renderMode != 'readonly'",
            "excludedConditionTypes": ["When rule"],
            "conditionsContext": "contextClass"
          },
          {
            "name": "allowRowEdit",
            "label": "Allow editing records",
            "format": "EXPRESSION",
            "lookupPathOverride": "viewMetadata.config",
            "visibility": "$this.renderMode != 'readonly'",
            "excludedConditionTypes": ["When rule"],
            "conditionsContext": "contextClass"
          }
        ]
      }
    ]
  }  